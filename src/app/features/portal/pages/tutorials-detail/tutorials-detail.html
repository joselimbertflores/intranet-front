<main class="h-full flex flex-col">
  <header class="shrink-0 px-6 pt-4 pb-3 flex items-center gap-3">
    <button
      pButton
      icon="pi pi-arrow-left"
      (click)="goBack()"
      [rounded]="true"
      [text]="true"
    ></button>
    <h1 class="text-2xl font-semibold text-surface-900">Tutorial</h1>
  </header>

  <section class="flex-1 min-h-0 px-4 pb-4">
    @if (dataResource.isLoading()) {
      <p>prueba</p>
      <div class="flex flex-col lg:flex-row gap-6 w-full" animate.enter="fade-slide">
        <div class="w-full lg:w-2/3 space-y-3">
          <div class="w-full aspect-video bg-surface-200 rounded-xl animate-pulse"></div>
        </div>
        <div class="w-full lg:w-1/3 flex flex-col min-h-0 space-y-3">
          <div class="h-5 w-40 bg-surface-200 rounded animate-pulse"></div>
          <div class="border border-surface-300 bg-surface-0 rounded-xl flex-1 min-h-0 p-3 space-y-3 overflow-hidden">
            @for (i of [1,2,3,4,5,6]; track $index) {
              <div class="h-14 bg-surface-200 rounded-lg animate-pulse"></div>
            }
          </div>
        </div>
      </div>
    }
    @else if (dataResource.error()) {
      error
    }
    @else {
       <div class="flex w-full gap-6 lg:flex-row flex-col"  animate.enter="fade-slide">
         <div class="w-full lg:w-2/3">
           <div  class="relative w-full aspect-video bg-black rounded-xl overflow-hidden">
             @if(currentVideo()){
               <video
                 class="w-full h-full"
                 [src]="currentVideo()?.fileUrl"
                 controls
               ></video>
             }
             @else{
               <div class="w-full h-full flex items-center justify-center px-4">
                 <p class="text-lg sm:text-xl font-medium text-white">
                   Selecciona un video de la lista
                 </p>
               </div>
             }
           </div>
         </div>
         <aside class="w-full lg:w-1/3 flex flex-col min-h-0">
           <h3 class="text-lg font-semibold text-surface-600 mb-2 px-1">
             Lista de reproducci√≥n
           </h3>
           <div class="border border-surface-300 bg-surface-0 rounded-xl flex-1 min-h-0 overflow-y-auto p-3">
             <ul class="space-y-2">
               @for (video of dataResource.value()?.videos; track $index) {
                 <li
                   (click)="selectVideo(video)"
                   class="cursor-pointer px-4 py-2 rounded-lg border border-surface-200 hover:bg-primary-50 transition"
                   [class.bg-primary-100]="currentVideo()?.id === video.id"
                 >
                   <div class="flex items-center gap-x-4">
                     <i
                       class="pi text-primary-600"
                       [ngClass]="[
                         currentVideo()?.id === video.id
                           ? 'pi-play-circle'
                           : 'pi-video'
                       ]"
                     ></i>
                     <div class="flex-1 min-w-0">
                       <p
                         class="font-medium text-surface-800 text-sm line-clamp-2 wrap-break-word"
                       >
                         {{ video.title }}
                       </p>
                       <p class="text-xs text-surface-600">Video {{ $index + 1 }}</p>
                     </div>
                   </div>
                 </li>
               }
             </ul>
           </div>
         </aside>
       </div>
    }

  </section>
</main>
